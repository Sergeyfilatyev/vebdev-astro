---
import {Icon} from 'astro-icon/components';

const {title, subtitle, steps} = Astro.props;
---

<section class='relative py-24 md:py-32 overflow-hidden'>
	<div class='absolute inset-0 bg-gradient-to-b from-primary-800/30 to-primary-900/50'></div>

	<div class='container px-4 relative z-10'>
		{title && (
			<h2 class='text-4xl md:text-5xl lg:text-6xl font-bold text-center mb-6 fade-in-up'>
				<span class='gradient-text'>{title}</span>
			</h2>
		)}
		{subtitle && (
			<p class='text-lg md:text-xl text-center text-primary-150 mb-16 max-w-2xl mx-auto fade-in-up fade-in-delay-1'>
				{subtitle}
			</p>
		)}

		{steps && steps.length > 0 && (
			<div class='max-w-4xl mx-auto space-y-8'>
				{steps.map((step: any, index: number) => {
					const stepData = typeof step === 'object' ? step : null;
					if (!stepData) return null;

					return (
						<div
							class='flex gap-8 items-start group fade-in-up'
							style={`animation-delay: ${index * 0.1}s`}>
							<div class='flex-shrink-0 relative'>
								<div class='absolute inset-0 bg-primary-500/20 rounded-full blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-500'></div>
								<div class='relative w-20 h-20 rounded-full bg-gradient-to-br from-primary-500 to-primary-600 flex items-center justify-center text-2xl font-bold text-primary-900 shadow-lg shadow-primary-500/30 group-hover:scale-110 transition-transform duration-300'>
									{stepData.step || String(index + 1).padStart(2, '0')}
								</div>
								{index < steps.length - 1 && (
									<div class='absolute top-20 left-1/2 transform -translate-x-1/2 w-0.5 h-8 bg-gradient-to-b from-primary-500/50 to-transparent'></div>
								)}
							</div>
							<div class='flex-1 pt-2 pb-8'>
								<div class='bg-gradient-to-br from-primary-850/50 to-primary-800/30 backdrop-blur-sm p-6 rounded-xl border border-primary-700/30 group-hover:border-primary-500/50 transition-all duration-300 group-hover:shadow-lg group-hover:shadow-primary-500/10'>
									{stepData.icon && (
										<div class='text-4xl mb-4 group-hover:scale-110 transition-transform duration-300 inline-flex items-center'>
											{stepData.icon.startsWith('twemoji:') || stepData.icon.startsWith('mdi:') ? (
												<Icon name={stepData.icon} />
											) : (
												<span>{stepData.icon}</span>
											)}
										</div>
									)}
									{stepData.title && (
										<h3 class='text-2xl md:text-3xl font-bold text-primary-50 mb-3 group-hover:text-primary-200 transition-colors'>
											{stepData.title}
										</h3>
									)}
									{stepData.description && (
										<p class='text-primary-150 leading-relaxed text-lg'>{stepData.description}</p>
									)}
								</div>
							</div>
						</div>
					);
				})}
			</div>
		)}
	</div>
</section>
